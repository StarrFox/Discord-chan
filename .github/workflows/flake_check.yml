name: "check flake"

on:
    pull_request:
      paths:
        - "flake.*"
        - "discord_chan/**"
        - ".github/workflows/flake_check.yml"
        - "pyproject.toml"
    push:
        branches: [master]
        paths:
          - "flake.*"
          - "discord_chan/**"
          - ".github/workflows/flake_check.yml"
          - "pyproject.toml"

jobs:
    check:
        name: Check
        runs-on: ubuntu-latest
        steps:
        - uses: actions/checkout@v4
        - name: Install Nix
          uses: DeterminateSystems/nix-installer-action@main
        - name: check flake
          run: nix flake check
